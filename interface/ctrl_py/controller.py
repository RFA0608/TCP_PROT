import numpy as np

class Controller:
    def __init__(self):
        self.F = np.array([[-0.536627792820633,	-0.0616616464699388,	0.00866858350768544,	-0.00463375401067145],
                           [0.00500554483113348,	-0.601557630748387,	0.00362678875646218,	0.000421412722115318],
                           [-114.091783546364,	-22.4291804036030,	2.46787179162606,	-1.85343312684920],
                           [4.67284205745743,	-140.995944698502,	1.45149348677951,	-0.831327144074360]], dtype=float)
        
        self.G = np.array([[1.55270125254271,	0.0119013552498322],
                           [0.0108847973351295,	1.55379044548734],
                           [120.523088182329,	2.51929505177743],
                           [1.68670345396683,	121.878828984762]], dtype=float)
        
        self.H = np.array([[25.8509647864634,	-83.0321122531947,	5.90039644952970,	-7.45747542479626]], dtype=float)

        self.x = np.array([[0],
                           [0],
                           [0],
                           [0]], dtype=float)
        
        self.y = np.array([[0],
                           [0]], dtype=float)

    def ctrl(self, y0, y1):
        u = self.H @ self.x

        self.y[0, 0] = y0
        self.y[1, 0] = y1
        self.x = self.F @ self.x + self.G @ self.y

        return u[0, 0]
